@model FootballPitchesBooking.Models.WebsiteStaffModels.UserModel
@{
    ViewBag.USER = "active";
    ViewBag.Title = "Chỉnh Sửa Thông Tin Thành Viên";
    Layout = "~/Views/Shared/_WebsiteStaffLayout.cshtml";
}

<script type="text/ecmascript">
    function check() {
        var flag = 0;
        var password = $("#txtPass").val();
        var confirmpassword = $("#txtConfirmPass").val();
        var email = $("#email").val();
        var reg = /^(\w+[\.])*\w+@@(\w+\.)+[a-zA-Z]+$/;
        var aln = /^[a-z|A-Z|0-9]*$/;

        if (password != "") {
            if (password.length < 6 || password.length > 32) {
                $("#ErrorPass").text("Yêu cầu mật khầu từ 6 đến 32 kí tự");
                $("#ErrorPass").css("display", "block");
                flag++;
            }
            else {
                $("#ErrorPass").text(" ");
                $("#ErrorPass").css("display", "none");
            }
        }

        if (confirmpassword != password) {
            $("#ErrorConfirmPass").text("Xác nhận mật khẩu phải giống với mật khẩu");
            $("#ErrorConfirmPass").css("display", "block");
            flag++;
        }
        else {
            $("#ErrorConfirmPass").text(" ");
            $("#ErrorConfirmPass").css("display", "none");
        }

        if (!reg.test(email)) {
            $("#Email_Error").text("Email không đúng");
            $("#Email_Error").css("display", "block");
            flag++;
        }
        else {
            $("#Email_Error").text(" ");
            $("#Email_Error").css("display", "none");
        }


        if (flag > 0) {
            return false;
        } else return true;
    }
</script>

<div class="row websitestaff-edit-user">
    <div class="span12">
        <div class="row">
            <div class="span9">
                <form action="EditUser?Id=@Request.QueryString["id"]" method="post" class="form-horizontal" enctype="multipart/form-data">
                    <fieldset>
                        <br />
                        <br />
                        <h1>CHỈNH SỬA THÔNG TIN THÀNH VIÊN
                        </h1>
                        <br />
                        @if (Model.ErrorMessages != null && Model.ErrorMessages.Count() > 0)
                        {
                            <div class="alert alert-danger">
                                @foreach (var error in Model.ErrorMessages)
                                {
                                    <p>- @error</p>
                                }
                            </div>
                        }
                        <div class="row">
                            <div class="span8">
                                <legend><span>THÔNG TIN CƠ BẢN</span></legend>
                            </div>
                            <div class="span3">
                                <label>
                                    TÊN ĐĂNG NHẬP
                                    <input name="UserName" type="text" disabled="disabled" value="@Model.UserName">
                                </label>
                            </div>
                            <div class="span3">
                                <label>
                                    MẬT KHẨU
                                    <input name="Password" type="text" placeholder="MẬT KHẨU" value="">
                                </label>
                            </div>
                            <div class="span3">
                                <label>
                                    XÁC NHẬN MẬT KHẨU
                                    <input name="ConfirmPassword" type="text" placeholder="XÁC NHẬN MẬT KHẨU" value="">
                                </label>
                            </div>
                            <div class="span3">
                                <label>
                                    TÊN THÀNH VIÊN
                                    <input name="FullName" type="text" disabled="disabled" value="@Model.FullName">
                                </label>
                            </div>
                            <div class="span3">
                                <label>
                                    SỐ ĐIỆN THOẠI
                                    <input name="PhoneNumber" type="text" disabled="disabled" value="@Model.PhoneNumber">
                                </label>
                            </div>
                            <div class="span3">
                                <label>
                                    E-MAIL
                                    <input id="email" name="Email" type="text" placeholder="E-Mail" required="required" value="@Model.Email">
                                    <div class="alert alert-danger" id="Email_Error" style="display: none"></div>
                                </label>
                            </div>
                            <div class="span3" style="width: 100%;">
                                <label>
                                    ĐỊA CHỈ
                                    <input style="width: 685px;" name="Address" type="text" disabled="disabled" value="@Model.Address">
                                </label>
                            </div>
                            <div class="span3">
                                <label>
                                    POINT
                                    <input name="Point"  type="text" placeholder="ĐIỂM" required="required"   value="@Model.Point">
                                    <script type="text/javascript">
                                        $('input[name=Point]').keyup(function (event) {
                                            if (isNaN(String.fromCharCode(event.which))) {
                                                var value = $(this).val();
                                                $(this).val(value.substr(0, value.length - 1));
                                            }
                                        });
                                    </script>
                                    <div class="alert alert-danger" id="Phone_Error" style="display: none"></div>
                                </label>
                            </div>
                            <div class="span3">
                                <label>
                                    THỨ HẠNG
                                    <input name="RankName" type="text" disabled="disabled" value="@Model.RankName">
                                </label>
                            </div>
                            <div class="span3" style="visibility: hidden;">
                                <label>&nbsp</label>
                                <input type="text">
                            </div>
                            <div class="span3">
                                <label>
                                    TRẠNG THÁI HOẠT ĐỘNG
                                    <select id="isActive" name="IsActive" data-cur="@Model.IsActive">
                                        <option value="True">ĐANG HOẠT ĐỘNG</option>
                                        <option value="False">KHÔNG HOẠT ĐỘNG</option>
                                    </select>
                                    <script type="text/javascript">
                                        $(document).ready(function () {
                                            $("#isActive").val($("#isActive").data("cur"));
                                        });
                                    </script>
                                </label>
                            </div>
                            <div class="span3">
                                <label>
                                    QUYỀN HẠN
                                    <select id="roleId" name="RoleId" data-cur="@Model.RoleId">
                                        @if (Model.Roles != null && Model.Roles.Count() > 0)
                                        {
                                            foreach (var item in Model.Roles)
                                            {
                                            <option value="@item.Id">@item.DisplayName</option>
                                            }
                                        }
                                    </select>
                                    <script type="text/javascript">
                                        $(document).ready(function () {
                                            $("#roleId").val($("#roleId").data("cur"));
                                        });
                                    </script>
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="span9">
                                <br />
                                <button type="button" onclick="window.location='/WebsiteStaff/Users'" class="btn btn-primary btn-large book-now pull-right groupbtn">HỦY BỎ</button>
                                <button type="submit" onclick="return check()" class="btn btn-primary btn-large book-now pull-right groupbtn">CẬP NHẬT</button>
                                <br />
                                <br />
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
