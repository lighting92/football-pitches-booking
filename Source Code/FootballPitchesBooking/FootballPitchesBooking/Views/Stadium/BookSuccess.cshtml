@model FootballPitchesBooking.Models.StadiumModels.BookModel
@{
    ViewBag.STADIUM = "active";
    ViewBag.Title = "Book";
}


<div class="row book-page">
    <div class="span12">
        <div class="row">
            <div class="span9">
                @if (Model.Stadium.IsActive)
                {
                    
                    <form action="/Stadium/Book" method="post" class="form-horizontal">
                        <fieldset>
                            <br />
                            <br />
                            <h1>Đặt Sân
                            <br />
                                <small>Chọn và điền đầy đủ vào mẫu bên dưới.</small>
                            </h1>
                            <br />
                                <div class="alert alert-success">@Model.SuccessMessage</div>
                           
                            <div class="row">
                                <div class="span8">
                                    <legend>Thông Tin Sân Bóng</legend>
                                </div>
                                <div class="span3">
                                    <label>
                                        Tên sân bóng
                                    <input type="text" value="@Model.Stadium.Name" readonly />
                                        <input type="hidden" value="@Model.Stadium.Id" readonly />
                                    </label>
                                </div>
                                <div class="span3">
                                    <label>
                                        E-Mail
                                    <input type="text" value="@Model.Stadium.Email" readonly />
                                    </label>
                                </div>
                                <div class="span3">
                                    <label>
                                        Số điện thoại
                                    <input type="text" value="@Model.Stadium.Phone" readonly />
                                    </label>
                                </div>
                                <div class="span9">
                                    <label>
                                        Địa chỉ sân
                                    <input class="span9" type="text" value="@Model.Stadium.Street, @Model.Stadium.Ward, @Model.Stadium.District" readonly/>
                                    </label>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="span8">
                                    <legend>Tùy Chọn Đặt Sân</legend>
                                </div>
                                <div class="span3">
                                    <label>
                                        Loại sân
									<select id="fieldType" disabled="disabled" data-cur="@Model.Options.FieldType">
                                        <option value="5">5 người</option>
                                        <option value="7">7 người</option>
                                        <option value="11">11 người</option>
                                    </select>
                                    </label>
                                </div>
                                <div class="span3">
                                    <label>
                                        Ngày đá
                                <input readonly type="text" class="span3" id="startDate" value="@Model.Options.StartDate">
                                    </label>
                                </div>
                                <div class="span3">
                                    <label>
                                        Giờ bắt đầu
                                        <br />
                                        <input readonly id="startTime" class="timepicker span2" type="text" value="@Model.Options.StartTime">
                                        <span class="add-on"><i class="icon-time"></i></span>
                                    </label>
                                </div>
                                <div class="span3">
                                    <label>
                                        Thời lượng
                                        <select disabled="disabled" id="duration" data-cur="@Model.Options.Duration">
                                            <option value="1">60 phút</option>
                                            <option value="1.5">90 phút</option>
                                            <option value="2">120 phút</option>
                                            <option value="2.5">150 phút</option>
                                            <option value="3">180 phút</option>
                                        </select>
                                    </label>
                                </div>
                                <div class="span3">
                                    <label>
                                        Sân Trống
                                        <select disabled="disabled" id="fieldPrices" data-cur="@Model.Options.ChosenField">
                                            @if (Model.Fields != null)
                                            {
                                                for (var i = 0; i < Model.Fields.Count(); i++)
                                                {
                                                    var field = Model.Fields[i];
                                                    var price = Model.Prices[i];
                                                <option value="@field.Id">Sân @field.Number: @price VNĐ</option>                                                    
                                                }
                                            }
                                            else
                                            {
                                                <option value="null">Bấm Vào Tìm Sân Trống</option>
                                            }
                                        </select>
                                    </label>
                                    <script type="text/javascript">
                                        $(document).ready(function () {
                                            $.each($("#fieldPrices option"), function (index, opt) {
                                                var strPrice = opt.innerHTML;
                                                var regex = / \d+ /;
                                                var el = document.createElement("price");
                                                var price = strPrice.match(regex);
                                                el.innerHTML = price;
                                                $(el).priceFormat({
                                                    prefix: '',
                                                    centsLimit: 0
                                                })
                                                opt.innerHTML = opt.innerHTML.replace(regex, " " + el.innerHTML + " ");
                                            });
                                        });
                                    </script>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="span8">
                                    <legend>Thông Tin Của Bạn</legend>
                                </div>
                                <div class="span3">
                                    <label>
                                        Họ và tên
									<input type="text" readonly value="@Model.UserInfo.FullName">
                                    </label>
                                </div>
                                <div class="span3">
                                    <label>
                                        Số điện thoại
									<input type="text" readonly value="@Model.UserInfo.Phone">
                                    </label>
                                </div>
                                <div class="span3">
                                    <label>
                                        E-Mail
									<input type="text" readonly value="@Model.UserInfo.Email">
                                    </label>
                                </div>
                            </div>
                            <br />
                            <div class="span9 center">
                                <label>
                                    <input disabled="disabled" type="checkbox" />
                                    Yêu cầu tìm đội giao hữu
                                        
                                </label>
                            </div>
                            <br />
                            <div class="row">
                                <div class="span9">
                                    <br />
                                    <button type="button" class="groupbtn2 btn-medium btn-danger pull-right" onclick="window.location='/Account/BookingHistory'">Xem Lịch Sử Đặt Sân</button>
                                    <br />
                                    <br />
                                </div>
                            </div>
                        </fieldset>
                    </form>
                    <script type="text/javascript">
                        $(document).ready(function () {
                            $.each($("select"), function (index, obj) {
                                $(obj).val($(obj).data("cur"));
                            });                            
                        });
                    </script>
                }
                else
                {
                    <div class="alert alert-danger">@Model.ErrorMessage</div>
                }
            </div>
        </div>
    </div>
</div>
